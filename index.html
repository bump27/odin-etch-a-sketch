<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel = "stylesheet" href = "styles.css">
</head>
<body>
    <div class="container"></div>
    <div class = "buttons">
        <button class="squares">Change Size!</button>
        <button class="clear">Clear All</button>
        <button class="rainbow">Rainbow!</button>
    </div>
    <script>
        function addHover(){
            boxes = document.querySelectorAll(".box");
            boxes.forEach(box => {
                box.addEventListener('mouseover', () => {
                    box.style.backgroundColor="orange";
                })
            })
        }
        function clearAll(){
            boxes = document.querySelectorAll(".box");
            boxes.forEach(box => {
                box.style.backgroundColor = "lightgray";
            })
        }
        let numSquares = 16;
        for (let i = 0; i < numSquares; i++){
            for (let j = 0; j < numSquares; j++){
                const container = document.querySelector(".container");
                const box = document.createElement("div");
                box.classList.add("box")
                container.appendChild(box);
            }
        }
        addHover();
        const square = document.querySelector(".squares");
        square.addEventListener('click', ()=>{
            numSquares = prompt("How many squares per side? (Please limit size to 100.) ");
            while (numSquares >= 100){
                numSquares = Number(prompt("Please limit size to 100. How many squares per side?"));
            }
            const container = document.querySelector(".container");
            const boxes = document.querySelectorAll(".box");
            boxes.forEach(box => container.removeChild(box))
            container.innerHTML = ''; 
            for (let i = 0; i < numSquares; i++){
                for (let j = 0; j < numSquares; j++){
                    const container = document.querySelector(".container");
                    const box = document.createElement("div");
                    box.classList.add("box")
                    let a = 480/numSquares;
                    box.style.width =  `${a}px`;
                    box.style.height = `${a}px`;
                    container.appendChild(box);
                }
            }
            addHover();
        })
        const clear = document.querySelector(".clear");
        clear.addEventListener('click', ()=>{
            clearAll();
        })
        const rainbow = document.querySelector(".rainbow");
        rainbow.addEventListener('click', ()=>{
            const boxes = document.querySelectorAll('.box');
            boxes.forEach(box =>{
                box.addEventListener('mouseover', ()=>{
                    box.style.backgroundColor = `rgb(
                        ${Math.floor(255*Math.random())}, 
                        ${Math.floor(255*Math.random())},
                        ${Math.floor(255*Math.random())})`;
                })
            })
        })        
    </script>
</body>
</html>